/**
 * 插件资源属性
 */
{
    $schema: 'https://json-schema.org/draft/2020-12/schema',
    $id: 'https://github.com/siyuan-community/siyuan-sdk/raw/main/schemas/manifest/plugin.schema.json5',
    $comment: 'v1.0.0',
    $ref: '#/$defs/root',
    $defs: {
        root: {
            // 插件资源清单文件定义
            description: 'Plugin resource manifest file definition',

            type: 'object',
            additionalProperties: true,
            required: [
                //
                'author',
                'name',
                'url',
                'version',
            ],
            properties: {
                author: {
                    $ref: '#/$defs/author',
                },
                backends: {
                    $ref: '#/$defs/backends',
                },
                description: {
                    $ref: '#/$defs/description',
                },
                displayName: {
                    $ref: '#/$defs/displayName',
                },
                frontends: {
                    $ref: '#/$defs/frontends',
                },
                funding: {
                    $ref: '#/$defs/funding',
                },
                keywords: {
                    $ref: '#/$defs/keywords',
                },
                minAppVersion: {
                    $ref: '#/$defs/minAppVersion',
                },
                name: {
                    $ref: '#/$defs/name',
                },
                readme: {
                    $ref: '#/$defs/readme',
                },
                url: {
                    $ref: '#/$defs/url',
                },
                version: {
                    $ref: '#/$defs/version',
                },
            },
        },
        author: {
            // 作者名
            description: 'The name of the author',
            type: 'string',
        },
        backends: {
            // 插件兼容的后端环境列表
            type: 'array',
            description: 'The back-end environment list that the plugin is compatible with',
            items: {
                type: 'string',
                description: 'The back-end environment that the plugin is compatible with',
                enum: [
                    'all', // 支持所有后端环境
                    'windows', // Windows 环境
                    'linux', // Linux 环境
                    'darwin', // macOS 环境
                    'docker', // Docker 环境
                    'android', // Android 环境
                    'ios ', // iOS 环境
                ],
            },
        },
        description: {
            // 资源描述
            description: 'The description of the resource',
            $ref: '#/$defs/_localized_text_',
        },
        displayName: {
            // 显示名称
            description: 'The display name of the resource',
            $ref: '#/$defs/_localized_text_',
        },
        frontends: {
            // 插件兼容的前端环境列表
            type: 'array',
            description: 'The front-end environment list that the plugin is compatible with',
            items: {
                type: 'string',
                description: 'The front-end environment that the plugin is compatible with',
                enum: [
                    'all', // 支持所有前端环境
                    'desktop', // 桌面端 Electron 主窗口环境
                    'desktop-window', // 桌面端 Electron 多窗口环境
                    'mobile', // 移动端环境
                    'browser-desktop', // 桌面端浏览器环境
                    'browser-mobile', // 移动端浏览器环境
                ],
            },
        },
        funding: {
            // 资助途径
            type: 'object',
            description: 'The funding of the resource',

            additionalProperties: false,
            required: [],
            properties: {
                custom: {
                    // 自定义捐助途径 URL
                    type: 'array',
                    description: 'The custom funding URLs',
                    items: {
                        type: 'string',
                        description: 'The custom funding URL',
                        format: 'uri',
                        examples: [
                            'https://afdian.net/a/<username>', // 爱发电
                            'https://ko-fi.com/<username>', // Ko-fi
                            'https://tidelift.com/subscription/<platform-name>/<package-name>', // Tidelift
                            'https://funding.communitybridge.org/projects/<project-name>', // Community Bridge
                            'https://liberapay.com/<username>', // Liberapay
                            'https://issuehunt.io/r/<username>', // IssueHunt
                            'https://crowdfunding.lfx.linuxfoundation.org/projects/<project-name>', // LFX Crowdfunding
                        ],
                    },
                },
                github: {
                    // GitHub sponsors 用户名
                    type: 'string',
                    description: 'The GitHub sponsors username, such as https://github.com/sponsors/<username>',
                    examples: ['88250'],
                },
                openCollective: {
                    // Open Collective 用户名
                    type: 'string',
                    description: 'The Open Collective username, such as https://opencollective.com/<username>',
                    examples: ['siyuan'],
                },
                patreon: {
                    // Patreon 用户名
                    type: 'string',
                    description: 'The Patreon username, such as https://www.patreon.com/<username>',
                },
            },
        },
        keywords: {
            // 用于搜索的关键词
            type: 'array',
            description: 'The keywords of the resource used for search',
            items: {
                type: 'string',
                description: 'The keyword used for search',
            },
        },
        minAppVersion: {
            // 兼容的最低思源版本
            type: 'string',
            description: 'The minimum version of SiYuan that the resource is compatible with',
            pattern: '^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)$',
        },
        name: {
            // 资源名称
            type: 'string',
            description: 'The name of the resource',
            pattern: '^[^\\\\/:*?"<>|. ][^\\\\/:*?"<>|]*[^\\\\/:*?"<>|. ]$',
        },
        readme: {
            // 资源说明文档名称
            description: 'The readme file name of the resource',
            $ref: '#/$defs/_localized_text_',
        },
        url: {
            // 资源仓库地址
            type: 'string',
            description: 'The GitHub repository URL of the resource',
            format: 'uri',
            examples: ['https://github.com/siyuan-note/plugin-sample'],
        },
        version: {
            // 资源版本号
            type: 'string',
            description: 'The version of the resource',
            // REF: https://semver.org/#is-there-a-suggested-regular-expression-regex-to-check-a-semver-string
            pattern: '^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$',
        },
        _localized_text_: {
            // 本地化文本
            type: 'object',
            description: 'Localize text fields',

            additionalProperties: true,
            required: ['default'],
            properties: {
                default: {
                    // 默认文本
                    type: 'string',
                    description: 'The default text',
                },
                en_US: {
                    // 英文文本
                    type: 'string',
                    description: 'The English text',
                },
                zh_CHT: {
                    // 繁体中文文本
                    type: 'string',
                    description: 'The Traditional Chinese text',
                },
                zh_CN: {
                    // 简体中文文本
                    type: 'string',
                    description: 'The Simplified Chinese text',
                },
            },
        },
    },
}
